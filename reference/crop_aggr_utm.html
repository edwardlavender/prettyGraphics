<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Crop, aggregate and reproject rasters for 3d visualisation — crop_aggr_utm • prettyGraphics</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Crop, aggregate and reproject rasters for 3d visualisation — crop_aggr_utm" />
<meta property="og:description" content="The 3d, interactive visualisation of large rasters (e.g. with pretty_scape_3d) can be constrained by memory requirements. Therefore, often, it may be preferable to crop a raster to a smaller area and aggregate the raster (if necessary) to reduce raster size prior to plotting. For meaningful landscape visualisations, it is also helpful to convert rasters, if required, to the Universal Transverse Mercator system, so that x, y and z coordinates are all on the same scale. This function is a wrapper function for crop, aggregate and projectRaster which implements these operations. This facilitates the visualisation of large raster files in chunks via pretty_scape_3d." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prettyGraphics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introducing_prettyGraphics.html">Vignette: An introduction to prettyGraphics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/edwardlavender/prettyGraphics/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Crop, aggregate and reproject rasters for 3d visualisation</h1>
    <small class="dont-index">Source: <a href='https://github.com/edwardlavender/prettyGraphics/blob/master/R/crop_aggr_utm.R'><code>R/crop_aggr_utm.R</code></a></small>
    <div class="hidden name"><code>crop_aggr_utm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The 3d, interactive visualisation of large rasters (e.g. with <code><a href='pretty_scape_3d.html'>pretty_scape_3d</a></code>) can be constrained by memory requirements. Therefore, often, it may be preferable to crop a raster to a smaller area and aggregate the raster (if necessary) to reduce raster size prior to plotting. For meaningful landscape visualisations, it is also helpful to convert rasters, if required, to the Universal Transverse Mercator system, so that x, y and z coordinates are all on the same scale. This function is a wrapper function for <code><a href='https://rdrr.io/pkg/raster/man/crop.html'>crop</a></code>, <code><a href='https://rdrr.io/pkg/raster/man/aggregate.html'>aggregate</a></code> and <code><a href='https://rdrr.io/pkg/raster/man/projectRaster.html'>projectRaster</a></code> which implements these operations. This facilitates the visualisation of large raster files in chunks via <code><a href='pretty_scape_3d.html'>pretty_scape_3d</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>crop_aggr_utm</span><span class='op'>(</span>
  <span class='va'>r</span>,
  <span class='va'>x1</span>,
  <span class='va'>x2</span>,
  <span class='va'>y1</span>,
  <span class='va'>y2</span>,
  aggregate <span class='op'>=</span> <span class='cn'>NULL</span>,
  proj_utm <span class='op'>=</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"+proj=utm +zone=29 +datum=WGS84"</span>,
    <span class='st'>"+units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"</span><span class='op'>)</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>r</th>
      <td><p>The <code><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></code> to be processed.</p></td>
    </tr>
    <tr>
      <th>x1</th>
      <td><p>A number which specifies the minimum x value for the raster. The raster will be cropped by this value.</p></td>
    </tr>
    <tr>
      <th>x2</th>
      <td><p>A number which specifies the maximum y value for the raster. The raster will be cropped by this value.</p></td>
    </tr>
    <tr>
      <th>y1</th>
      <td><p>A number which specifies the minimum x value for the raster. The raster will be cropped by this value.</p></td>
    </tr>
    <tr>
      <th>y2</th>
      <td><p>A number which specifies the maximum y value for the raster. The raster will be cropped by this value.</p></td>
    </tr>
    <tr>
      <th>aggregate</th>
      <td><p>(optional) A named list of arguments that is passed to <code><a href='https://rdrr.io/pkg/raster/man/aggregate.html'>aggregate</a></code> to aggregate the cropped raster.</p></td>
    </tr>
    <tr>
      <th>proj_utm</th>
      <td><p>A Universal Transverse Mercator projection string of class <code><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS-class</a></code>. Zone 29 is the default.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>A logical input which defines whether or not to print messages to the console regarding function progress. This can be helpful because cropping, aggregating and re-projecting large rasters can take some time.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Edward Lavender</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'></span>
<span class='r-in'><span class='co'>#### Example (1) Crop dat_gebco raster to defined area, aggregate and ensure UTM coordinates for</span></span>
<span class='r-in'><span class='co'># ... sensible visualisation on the scale of the data:</span></span>
<span class='r-in'><span class='va'>proj_utm</span> <span class='op'>&lt;-</span></span>
<span class='r-in'>  <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS</a></span><span class='op'>(</span><span class='st'>"+proj=utm +zone=29 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>dat_gebco_processed</span> <span class='op'>&lt;-</span></span>
<span class='r-in'><span class='fu'>crop_aggr_utm</span><span class='op'>(</span><span class='va'>dat_gebco</span>, <span class='op'>-</span><span class='fl'>5.5</span>, <span class='op'>-</span><span class='fl'>5.4</span>, <span class='fl'>56.36</span>, <span class='fl'>56.44</span>,</span>
<span class='r-in'>              aggregate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>fact <span class='op'>=</span> <span class='fl'>2</span>, fun <span class='op'>=</span> <span class='va'>max</span><span class='op'>)</span>,</span>
<span class='r-in'>              proj_utm <span class='op'>=</span> <span class='va'>proj_utm</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Defining raster extent...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Cropping raster...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Aggregating raster...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Reprojecting raster to UTM...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Printing raster dimensions...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 12, 17, 1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Returning raster...</span>
<span class='r-in'><span class='fu'><a href='pretty_scape_3d.html'>pretty_scape_3d</a></span><span class='op'>(</span><span class='va'>dat_gebco_processed</span>, aspectmode <span class='op'>=</span> <span class='st'>"data"</span>, stretch <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Defining plot properties...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Producing plot...</span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


