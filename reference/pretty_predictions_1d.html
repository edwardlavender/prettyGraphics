<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Pretty one-dimensional predictions — pretty_predictions_1d • prettyGraphics</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Pretty one-dimensional predictions — pretty_predictions_1d"><meta property="og:description" content="This function plots pretty one-dimensional predictions from a statistical model. Given a model, for each predictor, the function plots the predicted values of the response and associated 95 percent confidence intervals. Other predictors are held at the first level (for factors) or an average (e.g., mean or median, as specified) value (for doubles) or at custom values specified in a dataframe called newdata."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prettyGraphics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introducing_prettyGraphics.html">Vignette: An introduction to prettyGraphics</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edwardlavender/prettyGraphics/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pretty one-dimensional predictions</h1>
    <small class="dont-index">Source: <a href="https://github.com/edwardlavender/prettyGraphics/blob/HEAD/R/pretty_preds.R" class="external-link"><code>R/pretty_preds.R</code></a></small>
    <div class="hidden name"><code>pretty_predictions_1d.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function plots pretty one-dimensional predictions from a statistical <code>model</code>. Given a <code>model</code>, for each predictor, the function plots the predicted values of the response and associated 95 percent confidence intervals. Other predictors are held at the first level (for factors) or an average (e.g., mean or median, as specified) value (for doubles) or at custom values specified in a dataframe called <code>newdata</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  constants <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_pred <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  average <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  transform_x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xlim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylim_fix <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pretty_axis_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  add_points <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">0.5</span>, lwd <span class="op">=</span> <span class="fl">0.5</span>, col <span class="op">=</span> <span class="st">"grey20"</span><span class="op">)</span>,</span>
<span>  add_error_bars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>add_fit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  add_error_envelope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  add_xlab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>line <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span>,</span>
<span>  add_ylab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>line <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span>,</span>
<span>  add_main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adj <span class="op">=</span> <span class="fl">0</span>, font <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  one_page <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>model</dt>
<dd><p>A model (e.g. an output from <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">gam</a></code>).</p></dd>


<dt>data</dt>
<dd><p>(optional) The dataframe used to fit the model. If missing, this is extracted via <code>model.frame(model)</code>; however, this approach may fail if functions (e.g., <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></code>) have been applied to variables as part of the model formula.</p></dd>


<dt>x_var, n_pred, average, newdata, constants</dt>
<dd><p>(optional) Prediction controls.</p><ul><li><p><code>x_var</code> is a character variable that defines the name(s) of  predictors for which to plot predictions. If unsupplied, predictions are plotted for each predictor in the <code>model</code>.</p></li>
<li><p><code>n_pred</code> is a number that defines, for continuous predictors, the prediction resolution. For each continuous predictor, a sequence of values from the minimum to maximum value for that variable, with <code>n_pred</code> elements, is used for prediction. (For factors, predictions are plotted for each factor level.) Alternatively, <code>newdata</code> can be supplied.</p></li>
<li><p><code>average</code> is a function that is used to define the value at which doubles are held constant for prediction. The default is <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></code>.</p></li>
<li><p><code>newdata</code> is a dataframe that contains the data used for prediction. If supplied, this should contain one variable that changes in value (defined in <code>x_var</code>), with other variables held at selected values. If supplied, this supersedes <code>constants</code> (see below).</p></li>
<li><p><code>constants</code> is a one-row dataframe of constant values for explanatory variables. If supplied, <code>n_pred</code> model predictions are generated for <code>x_var</code>, while holding other variables constant at the values specified in <code>constants</code>.</p></li>
</ul></dd>


<dt>transform_x</dt>
<dd><p>A function to transform values of the predictor(s) for plotting.</p></dd>


<dt>xlim, ylim, ylim_fix, pretty_axis_args</dt>
<dd><p>Axis controls. <code>xlim</code> and <code>ylim</code> control axis limits for all plots. If unsupplied, pretty limits are used. If pretty limits are used, <code>ylim_fix</code> is a logical variable that defines whether or not to use the same y-axis limits on all plots (<code>TRUE</code>), which can facilitate comparisons, or to use plot-specific limits (<code>FALSE</code>). <code>pretty_axis_args</code> is a named list of arguments, passed to <code><a href="pretty_axis.html">pretty_axis</a></code>, for further control.</p></dd>


<dt>add_points</dt>
<dd><p>(optional) A named list of arguments, passed to <code><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></code>, to customise observations added to plots. An empty list specifies default options. <code>NULL</code> suppresses this argument.</p></dd>


<dt>add_error_bars, add_error_envelope</dt>
<dd><p>(optional) Named lists of arguments, passed to <code><a href="add_error_bars.html">add_error_bars</a></code> and <code><a href="add_error_envelope.html">add_error_envelope</a></code>, to customise the appearance of error bars (for factor predictors) or envelopes (for continuous predictors) respectively. Empty lists specify default options. <code>NULL</code> suppresses these arguments.</p></dd>


<dt>add_xlab, add_ylab, add_main</dt>
<dd><p>(optional) Named lists of arguments, passed to <code><a href="https://rdrr.io/r/graphics/mtext.html" class="external-link">mtext</a></code>, to add axis titles to plots. X-axis labels and plot titles are added to each plot, while only one global y-axis label is added. Empty lists specify default arguments, in which case variable names are taken as specified in the <code>model</code> and plot titles are given as capitalised letters or numbers in square brackets (if there are more than 26 predictors). Alternatively, names can be specified via the `text' argument to <code><a href="https://rdrr.io/r/graphics/mtext.html" class="external-link">mtext</a></code>. For <code>add_xlab</code> and <code>add_main</code> , the `text' argument can be a vector with one element for each plot; for <code>add_ylab</code> only one element should be supplied. <code>NULL</code> suppress these arguments.</p></dd>


<dt>one_page</dt>
<dd><p>A logical variable that defines whether or not to plot all plots on one page.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed to <code><a href="pretty_plot.html">pretty_plot</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The function plots predictions from a model. A list of axis parameters, with one element (from <code><a href="pretty_axis.html">pretty_axis</a></code>) for each variable, is returned invisibly.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Interactions are not currently supported.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="pretty_predictions_2d.html">pretty_predictions_2d</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Edward Lavender</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#### Define a model for predictions</span></span></span>
<span class="r-in"><span><span class="va">mod_1</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span> <span class="op">+</span> <span class="va">Species</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod_1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stats::lm(formula = Sepal.Length ~ Sepal.Width + Species, data = iris)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residuals:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Min       1Q   Median       3Q      Max </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -1.30711 -0.25713 -0.05325  0.19542  1.41253 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)         2.2514     0.3698   6.089 9.57e-09 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Width         0.8036     0.1063   7.557 4.19e-12 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Speciesversicolor   1.4587     0.1121  13.012  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Speciesvirginica    1.9468     0.1000  19.465  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual standard error: 0.438 on 146 degrees of freedom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Multiple R-squared:  0.7259,	Adjusted R-squared:  0.7203 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-statistic: 128.9 on 3 and 146 DF,  p-value: &lt; 2.2e-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (1): Plot predictions using default options</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (2): Plot predictions for specified variables</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>, x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sepal.Width"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="pretty_predictions_1d-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>, x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sepal.Width"</span>, <span class="st">"Species"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (3): Plot predictions using custom newdata</span></span></span>
<span class="r-in"><span><span class="va">p_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Sepal.Width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Width</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    Species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                     levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>,</span></span>
<span class="r-in"><span>                      x_var <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                      newdata <span class="op">=</span> <span class="va">p_dat</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-in"><span><span class="co"># Or use constants to use custom constants but standard values for x_var</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>,</span></span>
<span class="r-in"><span>                      constants <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Sepal.Width <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      x_var <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (4): Customise uncertainty</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>,</span></span>
<span class="r-in"><span>                      add_error_bars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">5</span>, bg <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      add_error_envelope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'border' argument dropped from 'add_ci' list for type = 'lines'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'border' argument dropped from 'add_ci' list for type = 'lines'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (5): Customise axes</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>,</span></span>
<span class="r-in"><span>                      ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>,</span></span>
<span class="r-in"><span>                      ylim_fix <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>,</span></span>
<span class="r-in"><span>                      pretty_axis_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>control_digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-8.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (6): Customise titles</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_1</span>,</span></span>
<span class="r-in"><span>                      add_xlab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Width"</span>, <span class="st">"Species"</span><span class="op">)</span>, line <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      add_ylab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>line <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      add_main <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-9.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (7) Back transformations</span></span></span>
<span class="r-in"><span><span class="co"># The function can be implemented with tranformed variables, but note:</span></span></span>
<span class="r-in"><span><span class="co"># * Transformations must be applied to the dataframe used to fit the model</span></span></span>
<span class="r-in"><span><span class="co"># ... (and not in the model fitting function);</span></span></span>
<span class="r-in"><span><span class="co"># * Transformations should not change variable types (e.g. scale() transforms</span></span></span>
<span class="r-in"><span><span class="co"># ... numbers into matrices, and this is not permitted).</span></span></span>
<span class="r-in"><span><span class="co"># * All numeric variables are affected by transform_x</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## (A) Scale variable and plot predictions on transformed scale</span></span></span>
<span class="r-in"><span><span class="co"># Define function to scale numbers that doesn't change variable types</span></span></span>
<span class="r-in"><span><span class="va">scale_num</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">$</span><span class="va">dim</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span>  <span class="va">y</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># Scale Sepal.Width</span></span></span>
<span class="r-in"><span><span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Width.S</span> <span class="op">&lt;-</span> <span class="fu">scale_num</span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Width</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Implement model</span></span></span>
<span class="r-in"><span><span class="va">mod_2</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width.S</span> <span class="op">+</span> <span class="va">Species</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Visualise predictions</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_2</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-10.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## (B) Back-transform predictions</span></span></span>
<span class="r-in"><span><span class="va">unscale</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">mu</span>      <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"scaled:center"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">sigma</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"scaled:scale"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">*</span> <span class="va">sigma</span> <span class="op">+</span> <span class="va">mu</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu">pretty_predictions_1d</span><span class="op">(</span><span class="va">mod_2</span>, transform_x <span class="op">=</span> <span class="va">unscale</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> pretty$n greater than the number of factor levels; resetting n to be the total number of factor levels.</span>
<span class="r-plt img"><img src="pretty_predictions_1d-11.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

